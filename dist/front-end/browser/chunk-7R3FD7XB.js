import{g as q,i as x}from"./chunk-MOL5YHFZ.js";import{a as V,b as U}from"./chunk-YPGXW24G.js";import{$ as P,P as I,Q as c,S as L,T as R,U as k,V as _,X as D,Y as O,Z as A,_ as z,aa as N,ba as H,ca as j,da as B,v as T}from"./chunk-SUTMR7BC.js";import{$ as u,Db as a,Dc as S,Eb as w,Ec as M,Ic as y,Lb as C,Pa as l,Qa as f,R as h,_ as F,eb as m,gb as r,mb as n,nb as o,ob as g,tb as b,ub as p}from"./chunk-XTY2SKW2.js";var Z=(()=>{let t=class t{};t.\u0275fac=function(d){return new(d||t)},t.\u0275mod=u({type:t}),t.\u0275inj=h({});let e=t;return e})();var v=(()=>{let t=class t{};t.\u0275fac=function(d){return new(d||t)},t.\u0275mod=u({type:t}),t.\u0275inj=h({imports:[x,y,q,x]});let e=t;return e})();var G=(()=>{let t=class t{};t.\u0275fac=function(d){return new(d||t)},t.\u0275mod=u({type:t}),t.\u0275inj=h({imports:[x,v,v,Z,x]});let e=t;return e})();function ee(e,t){e&1&&(n(0,"small",15),a(1,"Trainee Id is required."),o())}function te(e,t){e&1&&(n(0,"small",15),a(1,"Trainee Id must be at least 5 characters long."),o())}function ie(e,t){e&1&&(n(0,"small",15),a(1,"Trainee Id cannot be more than 15 characters long."),o())}function oe(e,t){e&1&&(n(0,"small",15),a(1,"Trainee Id must be alphanumeric."),o())}function ne(e,t){if(e&1&&(n(0,"div"),m(1,ee,2,0,"small",14)(2,te,2,0,"small",14)(3,ie,2,0,"small",14)(4,oe,2,0,"small",14),o()),e&2){let i=p();l(),r("ngIf",i.traineeForm.controls.employeeCode.errors==null?null:i.traineeForm.controls.employeeCode.errors.required),l(),r("ngIf",i.traineeForm.controls.employeeCode.errors==null?null:i.traineeForm.controls.employeeCode.errors.minlength),l(),r("ngIf",i.traineeForm.controls.employeeCode.errors==null?null:i.traineeForm.controls.employeeCode.errors.maxlength),l(),r("ngIf",i.traineeForm.controls.employeeCode.errors==null?null:i.traineeForm.controls.employeeCode.errors.pattern)}}function le(e,t){e&1&&(n(0,"small",15),a(1,"Name is required."),o())}function re(e,t){e&1&&(n(0,"small",15),a(1,"Name must be at least 2 characters long."),o())}function ae(e,t){e&1&&(n(0,"small",15),a(1,"Name cannot be more than 50 characters long."),o())}function de(e,t){e&1&&(n(0,"small",15),a(1,"Name can only contain letters and spaces."),o())}function se(e,t){if(e&1&&(n(0,"div"),m(1,le,2,0,"small",14)(2,re,2,0,"small",14)(3,ae,2,0,"small",14)(4,de,2,0,"small",14),o()),e&2){let i=p();l(),r("ngIf",i.traineeForm.controls.name.errors==null?null:i.traineeForm.controls.name.errors.required),l(),r("ngIf",i.traineeForm.controls.name.errors==null?null:i.traineeForm.controls.name.errors.minlength),l(),r("ngIf",i.traineeForm.controls.name.errors==null?null:i.traineeForm.controls.name.errors.maxlength),l(),r("ngIf",i.traineeForm.controls.name.errors==null?null:i.traineeForm.controls.name.errors.pattern)}}function ce(e,t){e&1&&(n(0,"small",15),a(1,"Email is required."),o())}function me(e,t){e&1&&(n(0,"small",15),a(1,"Please enter a valid email address."),o())}function fe(e,t){e&1&&(n(0,"small",15),a(1,"Email must be from the domain @experionglobal.com."),o())}function he(e,t){if(e&1&&(n(0,"div"),m(1,ce,2,0,"small",14)(2,me,2,0,"small",14)(3,fe,2,0,"small",14),o()),e&2){let i=p();l(),r("ngIf",i.traineeForm.controls.email.errors==null?null:i.traineeForm.controls.email.errors.required),l(),r("ngIf",i.traineeForm.controls.email.errors==null?null:i.traineeForm.controls.email.errors.email),l(),r("ngIf",i.traineeForm.controls.email.errors==null?null:i.traineeForm.controls.email.errors.domain)}}function ue(e,t){if(e&1&&(n(0,"option",16),a(1),o()),e&2){let i=t.$implicit;r("value",i.batchId),l(),w(i.batchName)}}function pe(e,t){e&1&&(n(0,"small",15),a(1,"Batch is required."),o())}function _e(e,t){if(e&1&&(n(0,"div"),m(1,pe,2,0,"small",14),o()),e&2){let i=p();l(),r("ngIf",i.traineeForm.controls.batchId.errors==null?null:i.traineeForm.controls.batchId.errors.required)}}function xe(e){return t=>{let i=t.value;return i?i.endsWith(e)?null:{domain:{value:t.value}}:null}}var st=(()=>{class e{traineeService;batchService;messageService;traineeForm=new k({employeeCode:new _("",[c.required,c.minLength(5),c.maxLength(15),c.pattern("^[a-zA-Z0-9]*$")]),name:new _("",[c.required,c.minLength(2),c.maxLength(50),c.pattern("^[a-zA-Z ]*$")]),email:new _("",[c.required,c.email,xe("@experionglobal.com")]),batchId:new _("",c.required),isActive:new _(!0,c.required)});batches=[];constructor(i,s,d){this.traineeService=i,this.batchService=s,this.messageService=d}ngOnInit(){this.loadBatches()}loadBatches(){this.batchService.getBatches().subscribe({next:i=>{this.batches=i},error:i=>{console.error("Error fetching batches:",i),this.messageService.add({severity:"error",summary:"Error",detail:"Failed to load batches"})},complete:()=>{console.log("Batch data fetch completed")}})}onSubmit(){if(this.traineeForm.valid){let i=this.traineeForm.value;console.log("Form Data:",i),this.traineeService.addTrainee(i).subscribe({next:s=>{console.log("Trainee added successfully:",s.message),this.messageService.add({severity:"success",summary:"Success",detail:s.message}),this.traineeForm.reset(),this.traineeForm.patchValue({isActive:!0})},error:s=>{console.error("Error adding trainee:",s),s.status===400?this.messageService.add({severity:"error",summary:"Invalid Data",detail:s.error.message||"Bad request"}):this.messageService.add({severity:"error",summary:"Server Error",detail:"Something went wrong"})}})}else console.error("Form is invalid"),this.messageService.add({severity:"warning",summary:"Validation Error",detail:"All fields are required and must be valid"})}static \u0275fac=function(s){return new(s||e)(f(V),f(U),f(T))};static \u0275cmp=F({type:e,selectors:[["app-form"]],standalone:!0,features:[C],decls:28,vars:7,consts:[[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","employee-code"],["type","text","id","employee-code","formControlName","employeeCode","placeholder","Enter Trainee Code","required",""],[4,"ngIf"],["for","name"],["type","text","id","name","formControlName","name","placeholder","Enter Name"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter Email"],["for","batch"],["id","batchId","formControlName","batchId","placeholder","Select batch"],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"submit-button",3,"disabled"],["class","error",4,"ngIf"],[1,"error"],[3,"value"]],template:function(s,d){s&1&&(n(0,"div",0)(1,"h4"),a(2,"Upload individual trainee data."),o(),n(3,"form",1),b("ngSubmit",function(){return d.onSubmit()}),n(4,"div",2)(5,"label",3),a(6,"Trainee Id"),o(),g(7,"input",4),m(8,ne,5,4,"div",5),o(),n(9,"div",2)(10,"label",6),a(11,"Name"),o(),g(12,"input",7),m(13,se,5,4,"div",5),o(),n(14,"div",2)(15,"label",8),a(16,"Email"),o(),g(17,"input",9),m(18,he,4,3,"div",5),o(),n(19,"div",2)(20,"label",10),a(21,"Batch"),o(),n(22,"select",11),m(23,ue,2,2,"option",12),o(),m(24,_e,2,1,"div",5),o(),n(25,"div")(26,"button",13),a(27,"Submit"),o()()()()),s&2&&(l(3),r("formGroup",d.traineeForm),l(5),r("ngIf",d.traineeForm.controls.employeeCode.invalid&&d.traineeForm.controls.employeeCode.touched),l(5),r("ngIf",d.traineeForm.controls.name.invalid&&d.traineeForm.controls.name.touched),l(5),r("ngIf",d.traineeForm.controls.email.invalid&&d.traineeForm.controls.email.touched),l(5),r("ngForOf",d.batches),l(),r("ngIf",d.traineeForm.controls.batchId.invalid&&d.traineeForm.controls.batchId.touched),l(2),r("disabled",d.traineeForm.invalid))},dependencies:[j,D,P,N,I,z,L,R,H,B,O,A,v,G,y,S,M],styles:[".form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;max-width:100%;margin:0 auto;padding:20px;border:1px solid #e0e0e0;border-radius:8px;background-color:#fff}h4[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px;margin-top:-10px}form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:15px;width:45%}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;border:1px solid #ccc;border-radius:4px}.image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;margin-bottom:20px}.submit-button[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--text-color-white);padding:10px 20px;border:none;border-radius:4px;cursor:pointer;width:142px;height:37px;text-align:center;margin-top:30px}.submit-button[_ngcontent-%COMP%]:hover{background-color:var(--secondary-color)}.error[_ngcontent-%COMP%]{color:red;font-size:12px}"]})}return e})();export{st as a};
