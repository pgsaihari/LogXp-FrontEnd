import{a as Y}from"./chunk-EHB2IOHX.js";import"./chunk-PRLSVQXO.js";import{a as L,b as z}from"./chunk-7Q5UBWXY.js";import{a as A}from"./chunk-NOU4FTAX.js";import{a as j}from"./chunk-QUKY5DZW.js";import{A as R,D as N,b as I,y as B,z as F}from"./chunk-POUPL73K.js";import{A as U,v as H}from"./chunk-SUTMR7BC.js";import{Cb as w,Cc as E,D as C,Db as o,Eb as s,Ec as D,Hc as k,Ic as T,Lb as S,Mb as b,Ob as M,Pa as r,Qa as c,Vb as g,Xb as h,Yb as O,_,eb as u,gb as p,l as x,mb as n,nb as i,ob as f,pb as v,qb as P,x as y}from"./chunk-XTY2SKW2.js";import"./chunk-66YHNWRR.js";var q=()=>({"min-width":"20rem"}),$=()=>({"min-width":"10rem"}),J=(a,l)=>({"highlight-row":a,"highlight-row-half":l});function G(a,l){a&1&&(n(0,"tr")(1,"th",12),o(2," Date "),f(3,"p-sortIcon",13),i(),n(4,"th",14),o(5," Check-In "),i(),n(6,"th",15),o(7," Check-Out "),i(),n(8,"th",16),o(9," Status "),i(),n(10,"th",17),o(11," Work Hours "),i(),n(12,"th",18),o(13," Remark "),i()())}function K(a,l){if(a&1&&(n(0,"tr")(1,"td",19),o(2),g(3,"date"),i(),n(4,"td",20),o(5),g(6,"date"),i(),n(7,"td",20),o(8),g(9,"date"),i(),n(10,"td",21),o(11),i(),n(12,"td",22),o(13),i(),n(14,"td",21),o(15),i()()),a&2){let e=l.$implicit;r(2),s(h(3,6,e.date,"d MMM, y")),r(3),s(h(6,9,e.loginTime,"hh:mm a")),r(3),s(h(9,12,e.logoutTime,"hh:mm a")),r(3),s(e.status),r(2),s(e.totalWorkHour+"hrs"),r(2),s(e.remark&&e.remark!=="null"?e.remark:"no remarks")}}function Q(a,l){a&1&&(n(0,"tr")(1,"th",23),o(2,"Date"),i(),n(3,"th",23),o(4,"Name"),i(),n(5,"th",23),o(6,"Type"),i()())}function V(a,l){a&1&&(v(0),o(1," Full Day "),P())}function X(a,l){a&1&&o(0," Half Day ")}function Z(a,l){if(a&1&&(n(0,"tr",24)(1,"td",23),o(2),g(3,"date"),i(),n(4,"td",23),o(5),i(),n(6,"td",23),u(7,V,2,0,"ng-container",25)(8,X,1,0,"ng-template",null,0,O),i()()),a&2){let e=l.$implicit,t=w(9);p("ngClass",M(8,J,e.holidayName==="Added Holiday"&&e.holidayType==="full_day",e.holidayName==="Added Holiday"&&e.holidayType==="half_day")),r(2),s(h(3,5,e.holidayDate,"mediumDate")),r(3),s(e.holidayName),r(2),p("ngIf",e.holidayType==="full_day")("ngIfElse",t)}}var ue=(()=>{class a{messageService;api;traineeAttendancelogService;authService;route;traineeLogs=[];traineeCode=null;items;activeItem;traineeDiv=!0;holidayDiv=!1;batchDiv=!1;holidays=[];receivedHolidayToAdd;totalFullHolidays=0;totalHalfHolidays=0;logsCount;currentUser;constructor(e,t,d,m,W){this.messageService=e,this.api=t,this.traineeAttendancelogService=d,this.authService=m,this.route=W}ngOnInit(){let e=this.authService.getCurrentUser();this.route.params.subscribe(t=>{this.currentUser=t.id,console.log(this.currentUser),this.getLogsByEmployeeCode(this.currentUser)}),console.log(this.traineeLogs),this.loadCompanyHoliday(),e?(this.traineeCode=e.userId,this.traineeCode&&(this.traineeAttendancelogService.setCurrentUser(this.traineeCode),this.loadTraineeLogs(this.traineeCode))):console.error("No logged-in user found.")}getLogsByEmployeeCode(e){this.traineeAttendancelogService.getLogsByEmployeeCode(e).pipe(y(t=>(console.error("Error fetching trainee details:",t),x(()=>new Error(t)))),C(()=>{console.log("Fetch trainee operation complete")})).subscribe(t=>{this.traineeLogs=t.logs,this.logsCount=t.count,console.log("Trainee logs:",t)})}loadTraineeLogs(e){this.traineeAttendancelogService.getLogsByEmployeeCode(e).subscribe(t=>{this.traineeLogs=t.logs},t=>{console.error("Error fetching trainee logs:",t)})}onTraineeClick(){console.log("Trainee tab clicked"),this.holidayDiv=!1,this.traineeDiv=!0,this.batchDiv=!1}onCalendarClick(){console.log("Calendar tab clicked"),this.holidayDiv=!0,this.traineeDiv=!1,this.batchDiv=!1}onBatchClick(){console.log("Batch tab clicked"),this.holidayDiv=!1,this.traineeDiv=!1,this.batchDiv=!0}downloadAttendanceReport(){let e={},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),d=URL.createObjectURL(t),m=document.createElement("a");m.href=d,m.download="attendance_report.json",m.click(),window.URL.revokeObjectURL(d),this.messageService.add({severity:"success",summary:"Report Downloaded",detail:"Attendance report has been downloaded successfully."})}loadCompanyHoliday(){this.api.getHolidaysOfAYear(new Date().getFullYear()).subscribe(e=>{this.holidays=e})}receivedHoliday(e){this.holidays.push(e),this.holidays.sort((t,d)=>new Date(t.holidayDate).getTime()-new Date(d.holidayDate).getTime())}deleteReceivedHoliday(e){this.holidays=this.holidays.filter(t=>!this.areDatesEqual(new Date(t.holidayDate),e))}areDatesEqual(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}static \u0275fac=function(t){return new(t||a)(c(H),c(j),c(z),c(L),c(I))};static \u0275cmp=_({type:a,selectors:[["app-user-profile-page"]],standalone:!0,features:[S],decls:17,vars:10,consts:[["halfDay",""],[3,"bdColor"],[1,"tables"],[1,"profiletable"],[1,"section-heading"],[1,"card"],["scrollable","true","sortMode","multiple",3,"value","scrollHeight","rows","tableStyle"],["pTemplate","header"],["pTemplate","body"],[1,"futureHolidays"],[1,"scrollable-container"],["scrollable","true","id","holidayTable",3,"value","scrollHeight","tableStyle"],["pSortableColumn","date"],["field","date"],["pSortableColumn","checkin"],["pSortableColumn","checkout"],["pSortableColumn","status"],["pSortableColumn","workhours"],["pSortableColumn","remark"],[2,"width","170px"],[2,"width","150px"],[2,"width","200px"],[2,"width","120px"],[2,"width","20px"],[3,"ngClass"],[4,"ngIf","ngIfElse"]],template:function(t,d){t&1&&(f(0,"ngx-spinner",1)(1,"app-user-widget-cards"),n(2,"div",2)(3,"div",3)(4,"h2",4),o(5," Daily Logs"),i(),n(6,"div",5)(7,"p-table",6),u(8,G,14,0,"ng-template",7)(9,K,16,15,"ng-template",8),i()()(),n(10,"div",9)(11,"p",4),o(12,"Holidays"),i(),n(13,"div",10)(14,"p-table",11),u(15,Q,7,0,"ng-template",7)(16,Z,10,11,"ng-template",8),i()()()()),t&2&&(p("bdColor","rgba(0, 0, 0, 0.8)"),r(7),p("value",d.traineeLogs)("scrollHeight","390px")("rows",4)("tableStyle",b(8,q)),r(7),p("value",d.holidays)("scrollHeight","390px")("tableStyle",b(9,$)))},dependencies:[N,B,U,F,R,T,E,D,k,Y,A],styles:[".tables[_ngcontent-%COMP%]   .profiletable[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{overflow-x:hidden;width:100%}[_nghost-%COMP%]     .card p-table{width:500px;table-layout:fixed}[_nghost-%COMP%]     .card p-table th, [_nghost-%COMP%]     .card p-table td{width:7em;overflow:hidden}.page[_ngcontent-%COMP%]{padding:20px;width:100%}.tables[_ngcontent-%COMP%]{display:flex;gap:2%;overflow:hidden}.profiletable[_ngcontent-%COMP%]{padding-left:10px;width:100%;height:75%}.card[_ngcontent-%COMP%]{border:3px solid white;border-radius:5px;overflow:hidden}.holidayContainer[_ngcontent-%COMP%]{background-color:var(--background-color);margin-top:20px;border-radius:8px;padding:5px}.section-heading[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#000;text-align:center;margin-top:5px;margin-bottom:5px}.buttons-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:30px}.table-header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:10px}.date-display[_ngcontent-%COMP%]{font-size:16px;color:#777}.trainee-status-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.trainee-status-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .trainee-status-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}.trainee-status-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f4f4f4;font-weight:700}.status[_ngcontent-%COMP%]{padding:5px 10px;border-radius:4px;color:#fff;font-weight:700}.status.enabled[_ngcontent-%COMP%]{background-color:#28a745}.status.disabled[_ngcontent-%COMP%]{background-color:#dc3545}.edit-button[_ngcontent-%COMP%]{padding:5px 15px;border:none;border-radius:4px;background-color:#007bff;color:#fff;cursor:pointer;font-size:14px}.edit-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}  .buttons-section p-button .p-button{background:red!important}  .buttons-section p-button .p-button{color:#fff!important}.month-summary-card[_ngcontent-%COMP%]{width:300px}.page[_ngcontent-%COMP%]{width:100%}  .p-tabmenu-nav li .p-menuitem-link{padding:5px}  .p-tabmenu{width:min-content}.holiday-summary[_ngcontent-%COMP%]{font-size:22px;font-weight:400}.futureHolidays[_ngcontent-%COMP%]{display:flex;flex-direction:column}.scrollable-container[_ngcontent-%COMP%]{width:auto;height:auto;border-radius:8px;box-shadow:0 2px 10px #0000001a;margin-bottom:10px}.highlight-row[_ngcontent-%COMP%]{color:var(--primary-color)}.highlight-row-half[_ngcontent-%COMP%]{color:#ffc107}  #holidayTable .p-datatable>.p-datatable-wrapper{border-radius:8px}  .p-tabmenu .p-tabmenu-nav .p-tabmenuitem.p-highlight .p-menuitem-link{background:#fff;border-color:red;color:red}@media (min-width: 1024px){.calendar-container[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:100%;gap:5%}}@media (max-width: 1023px){.buttons-section[_ngcontent-%COMP%]{height:fit-content;display:flex;justify-content:center;align-items:center;flex-direction:row;gap:30px}.calendar-container[_ngcontent-%COMP%]{height:fit-content;padding-bottom:50px;display:flex;flex-direction:column;gap:30px}[_nghost-%COMP%]     .holiday-summary-card .p-card .p-card-body{width:max-content}}@media (max-width: 768px){[_nghost-%COMP%]     .p-card-body{padding-top:15px;padding-bottom:5px}[_nghost-%COMP%]     .p-card-content{padding:0}.buttons-section[_ngcontent-%COMP%]{gap:10px;margin-bottom:75px}p-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px}}@media (max-width: 425px){[_nghost-%COMP%]     .p-card-body{padding:5px}}  .p-datatable .p-datatable-thead>tr>th{font-size:small;padding:10px;font-weight:700}  .p-datatable .p-datatable-tbody>tr>td{padding:20px;font-size:small;font-weight:700}"]})}return a})();export{ue as UserProfilePageComponent};
