import{f as Ge,g as j,h as Z,m as We,n as q,p as $e,u as He}from"./chunk-7K6FFDYF.js";import"./chunk-FWEGNDZ4.js";import{a as qe,b as Je,c as oe,d as Qe,e as et,f as tt,g as I,h as nt,i as k,j as A,k as J,l as ot,m as it,o as ht}from"./chunk-OLCIXV6S.js";import"./chunk-X6YHEMIY.js";import"./chunk-7R3FD7XB.js";import"./chunk-MOL5YHFZ.js";import"./chunk-XM4MHLYX.js";import"./chunk-NOOMRYKA.js";import"./chunk-RZXOIYP6.js";import"./chunk-YPGXW24G.js";import{a as ft}from"./chunk-EHB2IOHX.js";import"./chunk-PRLSVQXO.js";import{a as S}from"./chunk-7Q5UBWXY.js";import{a as O,b as rt}from"./chunk-NOU4FTAX.js";import"./chunk-TTWTHBXE.js";import{a as Ue,c as X,d as _,e as Be,g as Ve,j as gt}from"./chunk-POUPL73K.js";import{$ as dt,D as Ke,E as Xe,F as Ze,M as at,N as st,S as ct,W as lt,_ as pt,aa as mt,b as Fe,c as H,ca as ut,d as Le,e as je,f as ze,g as Y,h as De,i as K,ja as Q,v as Ye}from"./chunk-SUTMR7BC.js";import{$ as ge,Cb as _e,Cc as Ee,D as le,Db as c,Dc as Re,Eb as G,Ec as $,Gb as ye,Hb as Pe,Hc as Ne,Ib as Me,Jb as Se,Ka as ve,Kb as Oe,L as pe,Lb as f,Mb as L,N as de,Ob as we,Pa as l,Q as b,Qa as m,R as me,Ra as be,Ta as Ce,Ua as U,V as C,Va as B,Vb as Te,W as ue,Wa as ne,Xa as V,Xb as Ie,Yb as ke,_ as g,ca as fe,da as he,eb as T,f as se,gb as p,hc as Ae,ia as y,ib as F,ja as P,k as z,mb as r,nb as a,ob as d,sa as xe,sb as M,tb as h,ub as x,vc as W,w as ce,x as D,ya as N}from"./chunk-XTY2SKW2.js";import{a as ae}from"./chunk-66YHNWRR.js";var Lt=(()=>{let i=class i extends q{constructor(n,o,s){super(n,o,s)}ngOnDestroy(){this.flush()}};i.\u0275fac=function(o){return new(o||i)(C(W),C(j),C(Z))},i.\u0275prov=b({token:i,factory:i.\u0275fac});let t=i;return t})();function jt(){return new We}function zt(t,i,e){return new He(t,i,e)}var vt=[{provide:Z,useFactory:jt},{provide:q,useClass:Lt},{provide:U,useFactory:zt,deps:[Y,q,V]}],xt=[{provide:j,useFactory:()=>new $e},{provide:N,useValue:"BrowserAnimations"},...vt],bt=[{provide:j,useClass:Ge},{provide:N,useValue:"NoopAnimations"},...vt],Ct=(()=>{let i=class i{static withConfig(n){return{ngModule:i,providers:n.disableAnimations?bt:xt}}};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=ge({type:i}),i.\u0275inj=me({providers:xt,imports:[K]});let t=i;return t})();function _t(){return[...bt]}var Dt=()=>["/home"],Ut=()=>["/search"],Bt=()=>["/add-trainee"],Vt=()=>["/edit-callender"];function Gt(t,i){if(t&1){let e=M();r(0,"li",7),h("click",function(){y(e);let o=x();return P(o.setActive(0))}),d(1,"i",8),a()}if(t&2){let e=x();F("active",e.activeIndex===0),p("routerLink",L(3,Dt))}}function Wt(t,i){if(t&1){let e=M();r(0,"li",9),h("click",function(){y(e);let o=x();return P(o.setActive(1))}),d(1,"i",10),a()}if(t&2){let e=x();F("active",e.activeIndex===1),p("routerLink",L(3,Ut))}}function $t(t,i){if(t&1){let e=M();r(0,"li",11),h("click",function(){y(e);let o=x();return P(o.setActive(2))}),d(1,"i",12),a()}if(t&2){let e=x();F("active",e.activeIndex===2),p("routerLink",L(3,Bt))}}function Ht(t,i){if(t&1){let e=M();r(0,"li",13),h("click",function(){y(e);let o=x();return P(o.setActive(3))}),d(1,"i",14),a()}if(t&2){let e=x();F("active",e.activeIndex===3),p("routerLink",L(3,Vt))}}var yt=(()=>{class t{authService;router;activeIndex=0;role="";currentUrl="";constructor(e,n){this.authService=e,this.router=n}ngOnInit(){this.role=this.authService.getCurrentUserRole(),this.router.events.subscribe(e=>{e instanceof Ue&&this.updateNavbar(e.urlAfterRedirects)}),this.updateNavbar(this.router.url)}setActive(e){this.activeIndex=e}updateNavbar(e){switch(e){case"/home":this.setActive(0);break;case"/search":this.setActive(1);break;case"/add-trainee":this.setActive(2);break;case"/edit-callender":this.setActive(3);break;default:break}}static \u0275fac=function(n){return new(n||t)(m(S),m(_))};static \u0275cmp=g({type:t,selectors:[["app-navbar"]],standalone:!0,features:[f],decls:9,vars:4,consts:[[1,"navbar"],[1,"logo-container"],["src","assets/experionlogo.png","alt","Logo",1,"logo"],["pTooltip","Dashboard",3,"routerLink","active","click",4,"ngIf"],["pTooltip","Trainee Report",3,"routerLink","active","click",4,"ngIf"],["pTooltip","Add Trainee",3,"routerLink","active","click",4,"ngIf"],["pTooltip","Settings",3,"routerLink","active","click",4,"ngIf"],["pTooltip","Dashboard",3,"click","routerLink"],[1,"fas","fa-th"],["pTooltip","Trainee Report",3,"click","routerLink"],[1,"fa-solid","fa-clipboard"],["pTooltip","Add Trainee",3,"click","routerLink"],[1,"fa-solid","fa-user-plus"],["pTooltip","Settings",3,"click","routerLink"],[1,"fa-solid","fa-gear"]],template:function(n,o){n&1&&(r(0,"div",0)(1,"div",1),d(2,"img",2),a(),r(3,"ul"),T(4,Gt,2,4,"li",3)(5,Wt,2,4,"li",4)(6,$t,2,4,"li",5)(7,Ht,2,4,"li",6),d(8,"hr"),a()()),n&2&&(l(4),p("ngIf",o.role==="admin"),l(),p("ngIf",o.role==="admin"),l(),p("ngIf",o.role==="admin"),l(),p("ngIf",o.role==="admin"))},dependencies:[$,Be,Xe,Ke],styles:[".navbar[_ngcontent-%COMP%]{width:60px;background-color:#fff;height:100vh;display:flex;flex-direction:column;align-items:center;padding-top:20px;position:fixed;top:0;left:0;z-index:1000;transition:width .3s ease}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{cursor:pointer;list-style-type:none;padding:0;margin:0;display:flex;flex-direction:column;align-items:center;height:100%;justify-content:center}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:20px 0;text-align:center;width:100%;display:flex;justify-content:center}.navbar[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:var(--nav-bar-hover-color);transition:all .3s ease}.navbar[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--text-color-white);border-radius:50%;padding:10px}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:var(--secondary-color)}.logo-container[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;justify-content:center}.logo[_ngcontent-%COMP%]{max-width:50px;height:auto}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{width:100%;height:60px;flex-direction:row;padding-top:0;bottom:0;top:auto}.navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{flex-direction:row;justify-content:center}.navbar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 20px;height:100%;display:flex;align-items:center}.logo-container[_ngcontent-%COMP%]{margin-right:auto;padding-left:10px}.logo[_ngcontent-%COMP%]{max-width:40px}}"]})}return t})();var te=(()=>{class t{router;msalGuardConfig;msalService;msalBroadcastService;authService;constructor(e,n,o,s,u){this.router=e,this.msalGuardConfig=n,this.msalService=o,this.msalBroadcastService=s,this.authService=u}ngOnInit(){this.msalService.instance.getAllAccounts().length>0&&this.router.navigate(["/home"]),this.msalService.handleRedirectObservable().subscribe({next:n=>{n&&n.accessToken?(console.log("Login successful, Access Token:",n.accessToken),localStorage.setItem("msalKey",n.accessToken),this.authService.getUserRole(n.accessToken).subscribe({next:o=>{console.log("User Role Data:",o),this.authService.setCurrentUser(o);let s=this.authService.getCurrentUser();s?.role==="trainee"?this.router.navigate([`/user-profile/${s.userId}`]):s?.role==="admin"&&this.router.navigate(["/home"])},error:o=>{console.error("Error fetching user role:",o)}})):console.log("No access token found in the response")},error:n=>{console.error("Error during token processing:",n)}})}trainerLogin(){alert("Trainer logged in"),sessionStorage.setItem("logintoken","trainer"),this.router.navigate(["/home"])}adminLogin(){this.loginPopup(),sessionStorage.setItem("logintoken","admin"),this.router.navigate(["/home"])}traineeLogin(){alert("Trainee logged in"),sessionStorage.setItem("logintoken","user"),this.router.navigate(["/home"])}loginPopup(){this.msalGuardConfig.authRequest?this.msalService.loginPopup(ae({},this.msalGuardConfig.authRequest)).subscribe(e=>{this.handleLoginResponse(e)}):this.msalService.loginPopup().subscribe(e=>{this.handleLoginResponse(e)})}handleLoginResponse(e){this.msalService.instance.setActiveAccount(e.account);let n=e.accessToken;localStorage.setItem("msalKey",n),this.authService.getUserRole(n).subscribe({next:o=>{console.log("User Role Data:",o.userData),this.authService.setCurrentUser(o.userData),this.authService.setToken(o.token);let s=this.authService.getCurrentUser();console.log("Current User:",s),s?.role==="trainee"?this.router.navigate([`/user-profile/${s.userId}`]):s?.role==="admin"&&this.router.navigate(["/home"])},error:o=>{console.error("Error fetching user role:",o)}})}static \u0275fac=function(n){return new(n||t)(m(_),m(I),m(k),m(A),m(S))};static \u0275cmp=g({type:t,selectors:[["app-login"]],standalone:!0,features:[f],decls:17,vars:1,consts:[[1,"container"],[1,"translucent-box"],[1,"header"],[1,"title"],[1,"fa-solid","fa-hourglass-end"],[2,"color","#e13737"],[1,"content"],[1,"microsoft-signin-btn",3,"click"],[1,"fa-brands","fa-windows","fa-beat",2,"color","#e13737","--fa-animation-duration","2s"],[1,"footer"],["src","assets/Exp.png","alt","Experion Technologies Logo",1,"logo"],[3,"bdColor"]],template:function(n,o){n&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),d(4,"i",4),c(5,"Log"),r(6,"span",5),c(7,"XP"),a()()(),r(8,"div",6)(9,"p"),c(10,"Cultivating Future Leaders Through Precision and Presence."),a(),r(11,"button",7),h("click",function(){return o.adminLogin()}),d(12,"i",8),c(13," Sign in with Microsoft "),a()()(),r(14,"div",9),d(15,"img",10),a()(),d(16,"ngx-spinner",11)),n&2&&(l(16),p("bdColor","rgba(0, 0, 0, 0.8)"))},dependencies:[O],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:linear-gradient(to bottom right,#db0000 50%,#fff 50%);height:100vh;position:relative}.translucent-box[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background:#ffffffe6;padding:40px;border-radius:15px;text-align:center;box-shadow:0 8px 16px #00000026;max-width:600px;width:100%;margin:0 20px;transition:all .3s ease;animation:_ngcontent-%COMP%_fadeInScale 1s ease-in-out;transform:scale(.95);opacity:0;animation-fill-mode:forwards}.translucent-box[_ngcontent-%COMP%]:hover{transform:translateY(-10px) scale(1.05);box-shadow:0 12px 24px #00000040}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.header[_ngcontent-%COMP%]{margin-bottom:25px}.title[_ngcontent-%COMP%]{font-size:48px;color:#1a1a40;margin:0;font-weight:700}.subtitle[_ngcontent-%COMP%]{font-size:20px;color:#555;margin-top:10px;font-weight:400}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;color:#666;margin-bottom:30px}.microsoft-signin-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin:0 auto;background-color:#fff;padding:14px 30px;border:2px solid #ccc;border-radius:30px;cursor:pointer;font-weight:600;font-size:18px;transition:all .3s ease;box-shadow:0 6px 12px #0000001a}.microsoft-signin-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:22px;margin-right:10px}.microsoft-signin-btn[_ngcontent-%COMP%]:hover{border-color:#db0000;background-color:#f8f8f8;box-shadow:0 10px 20px #0003;transform:translateY(-3px)}.footer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;position:absolute;bottom:20px}.logo[_ngcontent-%COMP%]{width:180px}@media (max-width: 768px){.title[_ngcontent-%COMP%]{font-size:36px}.logo[_ngcontent-%COMP%]{width:150px}.translucent-box[_ngcontent-%COMP%]{padding:20px;margin:0 10px}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.microsoft-signin-btn[_ngcontent-%COMP%]{font-size:16px;padding:12px 25px}}"]})}return t})();var Pt=(()=>{class t{http;baseUrl=Ze.apiUrl+"/RealTimeAttendanceLogs";constructor(e){this.http=e}getLateArrivals(){return this.http.get(`${this.baseUrl}/late-arrivals`)}getTodayLogs(){return this.http.get(`${this.baseUrl}/logs`)}static \u0275fac=function(n){return new(n||t)(C(Fe))};static \u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Xt=(t,i)=>({"came-inside":t,"went-outside":i});function Zt(t,i){if(t&1&&(r(0,"tr")(1,"td"),c(2),a(),d(3,"td",16),r(4,"td"),c(5),a(),r(6,"td"),c(7),Te(8,"date"),a()()),t&2){let e=i.$implicit;l(2),G(e.employeeName),l(),p("ngClass",we(8,Xt,e.direction==="1",e.direction==="2"))("innerHTML",e.direction==="1"?"<i class='fa-solid fa-person-walking'></i> In":e.direction==="2"?"<i class='fa-solid fa-person-walking'></i> Out":"",ve),l(2),G(e.place),l(2),G(Ie(8,5,e.logDateTime,"shortTime"))}}var Mt=(()=>{class t{attendanceLogService;closePopup=new xe;showLateArrivals=!0;trainees=[];filteredTrainees=[];selectedBatchTrainees="";paginatedTrainees=[];pageTrainees=1;itemsPerPage=10;totalPages=1;constructor(e){this.attendanceLogService=e}ngOnInit(){this.fetchTrainees()}fetchTrainees(){this.attendanceLogService.getTodayLogs().subscribe(e=>{this.trainees=e,this.filteredTrainees=e,this.updatePagination()},e=>{console.error("Error fetching trainees logs",e)})}filterTrainees(){this.selectedBatchTrainees?this.filteredTrainees=this.trainees.filter(e=>e.batchName===this.selectedBatchTrainees):this.filteredTrainees=this.trainees,this.pageTrainees=1,this.updatePagination()}updatePagination(){this.totalPages=Math.ceil(this.filteredTrainees.length/this.itemsPerPage),this.paginatedTrainees=this.filteredTrainees.slice((this.pageTrainees-1)*this.itemsPerPage,this.pageTrainees*this.itemsPerPage)}previousPage(){this.pageTrainees>1&&(this.pageTrainees--,this.updatePagination())}nextPage(){this.pageTrainees<this.totalPages&&(this.pageTrainees++,this.updatePagination())}close(){this.closePopup.emit()}static \u0275fac=function(n){return new(n||t)(m(Pt))};static \u0275cmp=g({type:t,selectors:[["app-real-time-pop-up"]],outputs:{closePopup:"closePopup"},standalone:!0,features:[f],decls:40,vars:6,consts:[[1,"popup"],[1,"popup-content"],[1,"close-btn",3,"click"],[1,"title-pagination-container"],[2,"color","var(--primary-color)"],[1,"filter-container"],["for","traineeFilter"],["id","traineeFilter",1,"filter-button",3,"ngModelChange","ngModel"],["value",""],["value","1"],["value","2"],[1,"pagination-container"],[3,"click","disabled"],[1,"table-container"],[4,"ngFor","ngForOf"],[1,"asterisk-note"],[3,"ngClass","innerHTML"]],template:function(n,o){n&1&&(r(0,"div",0)(1,"div",1)(2,"button",2),h("click",function(){return o.close()}),c(3,"\u2715"),a(),r(4,"div",3)(5,"h3",4),c(6,"Live Swipe Actions"),a(),r(7,"div",5)(8,"label",6),c(9,"Filter by Batch:"),a(),r(10,"select",7),Se("ngModelChange",function(u){return Me(o.selectedBatchTrainees,u)||(o.selectedBatchTrainees=u),u}),h("ngModelChange",function(){return o.filterTrainees()}),r(11,"option",8),c(12,"All Batches"),a(),r(13,"option",9),c(14,"Batch 4"),a(),r(15,"option",10),c(16,"Batch 3"),a()()(),r(17,"div",11)(18,"button",12),h("click",function(){return o.previousPage()}),c(19,"Previous"),a(),r(20,"span"),c(21),a(),r(22,"button",12),h("click",function(){return o.nextPage()}),c(23,"Next"),a()()(),r(24,"div",13)(25,"table")(26,"thead")(27,"tr")(28,"th"),c(29,"Trainee Name"),a(),r(30,"th"),c(31,"Movement"),a(),r(32,"th"),c(33,"Location"),a(),r(34,"th"),c(35,"Time"),a()()(),r(36,"tbody"),T(37,Zt,9,11,"tr",14),a()()(),r(38,"p",15),c(39,"* It shows the latest 100 logs"),a()()()),n&2&&(l(10),Pe("ngModel",o.selectedBatchTrainees),l(8),p("disabled",o.pageTrainees===1),l(3),ye("Page ",o.pageTrainees," of ",o.totalPages,""),l(),p("disabled",o.pageTrainees===o.totalPages),l(15),p("ngForOf",o.paginatedTrainees))},dependencies:[Re,Ne,ut,dt,mt,pt,ct,lt,Ee],styles:[".popup[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;padding:10px}.popup-content[_ngcontent-%COMP%]{position:relative;background:#fff;padding:20px;border-radius:8px;width:100%;max-width:80%;height:auto;box-sizing:border-box;text-align:center;box-shadow:0 4px 12px #0000001a;z-index:1001;display:flex;flex-direction:column}.close-btn[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;background-color:transparent;border:none;font-size:1.5rem;color:#333;cursor:pointer;padding:0}.close-btn[_ngcontent-%COMP%]:hover{color:red}.title-pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px;flex-wrap:wrap}.filter-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:20px}.filter-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px;font-weight:700}.filter-button[_ngcontent-%COMP%]{padding:5px 10px;border-radius:4px;border:1px solid #ddd;background-color:#fff;color:#333;cursor:pointer;font-size:14px;transition:border-color .3s ease,box-shadow .3s ease}.filter-button[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 5px #0003}.filter-button[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.asterisk-note[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:20px;text-align:center}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.pagination-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff;border:none;padding:8px 12px;margin:0 5px;cursor:pointer;border-radius:4px}.pagination-container[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 10px;font-weight:700}.table-container[_ngcontent-%COMP%]{flex:1;max-height:none;margin-bottom:20px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;table-layout:fixed}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#fff;z-index:2}table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:none}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;text-align:left}tbody[_ngcontent-%COMP%]{max-height:300px;display:block;overflow-y:auto}thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.came-inside[_ngcontent-%COMP%]{color:#0d7a0d;font-weight:700}.went-outside[_ngcontent-%COMP%]{color:#d73b20;font-weight:700}@media (max-width: 768px){.popup-content[_ngcontent-%COMP%]{padding:15px;max-width:90%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){.popup-content[_ngcontent-%COMP%]{padding:10px;max-width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:12px}}"]})}return t})();function qt(t,i){if(t&1){let e=M();r(0,"app-real-time-pop-up",7),h("closePopup",function(){y(e);let o=x(2);return P(o.showPopup=!1)}),a()}}function Jt(t,i){if(t&1){let e=M();r(0,"div",2),d(1,"app-navbar")(2,"p-toast",3),r(3,"div",4),d(4,"app-top-header")(5,"router-outlet"),a(),r(6,"button",5),h("click",function(){y(e);let o=x();return P(o.showPopup=!0)}),c(7," LIVE SWIPE INFO "),a(),T(8,qt,1,0,"app-real-time-pop-up",6),a()}if(t&2){let e=x();l(2),p("showTransformOptions","translateX(100%)"),l(6),p("ngIf",e.showPopup)}}function Qt(t,i){t&1&&d(0,"app-login")}var St=(()=>{class t{router;renderer;msalGuardConfig;msalService;msalBroadcastService;authService;role="admin";_destroying$=new se;isLogged=!1;showPopup=!1;constructor(e,n,o,s,u,w){this.router=e,this.renderer=n,this.msalGuardConfig=o,this.msalService=s,this.msalBroadcastService=u,this.authService=w}ngOnInit(){try{this.msalService.handleRedirectObservable().pipe(D(e=>(console.error("Error during handleRedirectObservable:",e),z(null)))).subscribe(),this.msalService.instance.enableAccountStorageEvents(),this.msalBroadcastService.msalSubject$.pipe(D(e=>(console.error("Error subscribing to MSAL subject:",e),z(null)))).subscribe(()=>{this.msalService.instance.getAllAccounts().length===0&&(console.log("No active accounts found. Redirecting to /home."),this.router.navigate(["/home"]))}),this.msalBroadcastService.inProgress$.pipe(ce(e=>e===Qe.None),pe(this._destroying$),D(e=>(console.error("Error checking interaction status:",e),z(null)))).subscribe(()=>{this.checkAndSetActiveAccount()}),this.isLogged=this.isLoggedIn()}catch(e){console.error("Error during initialization in ngOnInit:",e)}}checkAndSetActiveAccount(){try{let e=this.msalService.instance.getActiveAccount();if(!e&&this.msalService.instance.getAllAccounts().length>0){let n=this.msalService.instance.getAllAccounts();this.msalService.instance.setActiveAccount(n[0]),console.log("Active account set to:",n[0])}else e||console.log("No accounts found. No active account set.")}catch(e){console.error("Error during checkAndSetActiveAccount:",e)}}isLoggedIn(){try{let e=localStorage.getItem("msal.account.keys");return console.log("MSAL account keys in local storage:",e),e!==null}catch(e){return console.error("Error checking logged-in status:",e),!1}}ngOnDestroy(){try{this._destroying$.next(void 0),this._destroying$.complete(),console.log("Component destroyed and observables unsubscribed.")}catch(e){console.error("Error during ngOnDestroy:",e)}}static \u0275fac=function(n){return new(n||t)(m(_),m(B),m(I),m(k),m(A),m(S))};static \u0275cmp=g({type:t,selectors:[["app-layout"]],standalone:!0,features:[Oe([Ye]),f],decls:3,vars:2,consts:[["loginTemplate",""],["class","main",4,"ngIf","ngIfElse"],[1,"main"],["position","top-left",3,"showTransformOptions"],[1,"main-container"],[1,"floating-btn",3,"click"],[3,"closePopup",4,"ngIf"],[3,"closePopup"]],template:function(n,o){if(n&1&&T(0,Jt,9,2,"div",1)(1,Qt,1,0,"ng-template",null,0,ke),n&2){let s=_e(2);p("ngIf",o.isLogged)("ngIfElse",s)}},dependencies:[X,yt,it,te,st,at,$,Mt],styles:["body[_ngcontent-%COMP%]{background-color:red;margin:0;display:flex;justify-content:center}.main[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;height:100vh}.main-container[_ngcontent-%COMP%]{padding:5px 20px;max-width:1140px;width:100%;box-sizing:border-box}@media (max-width: 1200px){.main-container[_ngcontent-%COMP%]{max-width:95vw}}@media (min-width: 1024px){.main-container[_ngcontent-%COMP%]{max-width:90vw}}@media (max-width: 768px){.main-container[_ngcontent-%COMP%]{max-width:100vw;padding:10px}}.floating-btn[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px;display:flex;align-items:center;justify-content:center;padding:10px 20px;background-color:#fff;color:#000;border:4px solid transparent;border-radius:30px;font-size:16px;font-weight:700;cursor:pointer;box-shadow:0 4px 8px #0000001a;transition:box-shadow .3s ease;animation:_ngcontent-%COMP%_pulse 3s infinite,_ngcontent-%COMP%_border-animation 3s infinite linear;background-clip:padding-box;background-origin:border-box}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);box-shadow:0 4px 8px #ff000080}50%{transform:scale(1.1);box-shadow:0 6px 12px #ff0000b3}}@keyframes _ngcontent-%COMP%_border-animation{0%{border-color:red transparent transparent transparent;border-width:4px 4px 4px 4px}25%{border-color:red red transparent transparent;border-width:6px 4px 4px 6px}50%{border-color:transparent red red transparent;border-width:4px 6px 6px 4px}75%{border-color:transparent transparent red red;border-width:4px 4px 6px 6px}to{border-color:red transparent transparent red;border-width:4px 4px 4px 4px}}.floating-btn[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #f00c;animation:none}@media (max-width: 768px){.floating-btn[_ngcontent-%COMP%]{padding:8px 16px;font-size:14px}}@media (max-width: 480px){.floating-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px;bottom:15px;right:15px}}"]})}return t})();var E=(()=>{class t{router;authService;constructor(e,n){this.router=e,this.authService=n}canActivate(e,n){let o=e.data.expectedRole,s=this.authService.getCurrentUserRole();if(!s){let u=localStorage.getItem("currentUser");u&&(s=JSON.parse(u)?.Role)}return console.log("User Role:",s),console.log("Expected Role:",o),s===o?!0:(this.router.navigate(["/unauthorized"]),!1)}static \u0275fac=function(n){return new(n||t)(C(_),C(S))};static \u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ot=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=g({type:t,selectors:[["app-unauthorized"]],standalone:!0,features:[f],decls:7,vars:1,consts:[[1,"unauthorized-container"],[1,"unauthorized-content"],[1,"unauthorized-title"],[1,"unauthorized-message"],[3,"bdColor"]],template:function(n,o){n&1&&(r(0,"section",0)(1,"div",1)(2,"h1",2),c(3,"403 - Unauthorized"),a(),r(4,"p",3),c(5," Sorry, you don't have permission to view this page. Please Log out and Login; "),a()()(),d(6,"ngx-spinner",4)),n&2&&(l(6),p("bdColor","rgba(0, 0, 0, 0.8)"))},dependencies:[O],styles:[".unauthorized-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f5f5f5}.unauthorized-content[_ngcontent-%COMP%]{text-align:center;padding:2rem;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;max-width:500px;width:100%}.unauthorized-title[_ngcontent-%COMP%]{font-size:2.5rem;color:#ff4d4f;margin-bottom:1rem;font-weight:700}.unauthorized-message[_ngcontent-%COMP%]{font-size:1.2rem;color:#333;margin-bottom:2rem}.go-home-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:.75rem 1.5rem;border:none;border-radius:4px;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.go-home-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}@media (max-width: 768px){.unauthorized-title[_ngcontent-%COMP%]{font-size:2rem}.unauthorized-message[_ngcontent-%COMP%]{font-size:1rem}.go-home-btn[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:.9rem}}"]})}return t})();var wt=(()=>{class t{router;constructor(e){this.router=e}static \u0275fac=function(n){return new(n||t)(m(_))};static \u0275cmp=g({type:t,selectors:[["app-not-found"]],standalone:!0,features:[f],decls:7,vars:1,consts:[[1,"not-found-container"],[1,"not-found-content"],[1,"not-found-title"],[1,"not-found-message"],[3,"bdColor"]],template:function(n,o){n&1&&(r(0,"section",0)(1,"div",1)(2,"h1",2),c(3,"404 - Page Not Found"),a(),r(4,"p",3),c(5," The page you are looking for does not exist. "),a()()(),d(6,"ngx-spinner",4)),n&2&&(l(6),p("bdColor","rgba(0, 0, 0, 0.8)"))},dependencies:[O],styles:[".not-found-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f5f5f5}.not-found-content[_ngcontent-%COMP%]{text-align:center;padding:2rem;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;max-width:500px;width:100%}.not-found-title[_ngcontent-%COMP%]{font-size:2.5rem;color:#ff4d4f;margin-bottom:1rem;font-weight:700}.not-found-message[_ngcontent-%COMP%]{font-size:1.2rem;color:#333;margin-bottom:2rem}.go-home-btn[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;padding:.75rem 1.5rem;border:none;border-radius:4px;font-size:1rem;cursor:pointer;transition:background-color .3s ease}.go-home-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}"]})}return t})();var Tt=(()=>{class t{employee_count=456;header_icon="fa-solid fa-users employee-icon";card_header="Total Employees";footer_icon="fa-solid fa-circle-plus";card_footer="2 new employees added!";static \u0275fac=function(n){return new(n||t)};static \u0275cmp=g({type:t,selectors:[["app-test-page"]],standalone:!0,features:[f],decls:2,vars:1,consts:[[3,"bdColor"]],template:function(n,o){n&1&&d(0,"app-user-widget-cards")(1,"ngx-spinner",0),n&2&&(l(),p("bdColor","rgba(0, 0, 0, 0.8)"))},dependencies:[gt,Q,ft,O]})}return t})();var It=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"login",component:te},{path:"",component:St,canActivate:[J],children:[{path:"home",loadComponent:()=>import("./chunk-7REYBZPR.js").then(t=>t.HomeComponent),canActivate:[E],data:{expectedRole:"admin"}},{path:"search",loadComponent:()=>import("./chunk-VUROT3JM.js").then(t=>t.SearchTraineePageComponent),canActivate:[E],data:{expectedRole:"admin"}},{path:"add-trainee",loadComponent:()=>import("./chunk-6IK5MSZ6.js").then(t=>t.AddTraineesPageComponent),canActivate:[E],data:{expectedRole:"admin"}},{path:"edit-callender",loadComponent:()=>import("./chunk-JNDLXMIV.js").then(t=>t.EditCallenderPageComponent),canActivate:[E],data:{expectedRole:"admin"}},{path:"user-profile/:id",loadComponent:()=>import("./chunk-P47DFACY.js").then(t=>t.UserProfilePageComponent),canActivate:[E],data:{expectedRole:"trainee"}},{path:"unauthorized",component:Ot},{path:"test",component:Tt},{path:"**",component:wt}]}];var en="@",tn=(()=>{let i=class i{constructor(n,o,s,u,w){this.doc=n,this.delegate=o,this.zone=s,this.animationType=u,this.moduleImpl=w,this._rendererFactoryPromise=null,this.scheduler=ue(Ce,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-5KQNEWDA.js").then(o=>o)).catch(o=>{throw new de(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:s})=>{this._engine=o(this.animationType,this.doc);let u=new s(this.delegate,this._engine,this.zone);return this.delegate=u,u})}createRenderer(n,o){let s=this.delegate.createRenderer(n,o);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let u=new re(s);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(w=>{let Ft=w.createRenderer(n,o);u.use(Ft),this.scheduler?.notify(9)}).catch(w=>{u.use(s)}),u}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};i.\u0275fac=function(o){be()},i.\u0275prov=b({token:i,factory:i.\u0275fac});let t=i;return t})(),re=class{constructor(i){this.delegate=i,this.replay=[],this.\u0275type=1}use(i){if(this.delegate=i,this.replay!==null){for(let e of this.replay)e(i);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}get destroyNode(){return this.delegate.destroyNode}appendChild(i,e){this.delegate.appendChild(i,e)}insertBefore(i,e,n,o){this.delegate.insertBefore(i,e,n,o)}removeChild(i,e,n){this.delegate.removeChild(i,e,n)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,n,o){this.delegate.setAttribute(i,e,n,o)}removeAttribute(i,e,n){this.delegate.removeAttribute(i,e,n)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,n,o){this.delegate.setStyle(i,e,n,o)}removeStyle(i,e,n){this.delegate.removeStyle(i,e,n)}setProperty(i,e,n){this.shouldReplay(e)&&this.replay.push(o=>o.setProperty(i,e,n)),this.delegate.setProperty(i,e,n)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,n){return this.shouldReplay(e)&&this.replay.push(o=>o.listen(i,e,n)),this.delegate.listen(i,e,n)}shouldReplay(i){return this.replay!==null&&i.startsWith(en)}};function kt(t="animations"){return ne("NgAsyncAnimations"),fe([{provide:U,useFactory:(i,e,n)=>new tn(i,e,n,t),deps:[W,Y,V]},{provide:N,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var At=(()=>{class t{spinnerService;constructor(e){this.spinnerService=e}intercept(e,n){return this.spinnerService.show(),n.handle(e).pipe(le(()=>{setTimeout(()=>{this.spinnerService.hide()},500)}))}static \u0275fac=function(n){return new(n||t)(C(ht))};static \u0275prov=b({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var R={production:!1,msalConfig:{auth:{clientId:"67032d8f-1308-4b68-bac8-0359ed25a24a",authority:"https://login.microsoftonline.com/5b751804-232f-410d-bb2f-714e3bb466eb"}},apiConfig:{scopes:["user.read"],uri:"https://graph.microsoft.com/v1.0/me"}};var Et=(()=>{class t{TOKEN_KEY="jwtToken";intercept(e,n){let o=localStorage.getItem(this.TOKEN_KEY);if(o){let s=e.clone({headers:e.headers.set("Authorization",`Bearer ${o}`)});return n.handle(s)}return n.handle(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=b({token:t,factory:t.\u0275fac})}return t})();function nn(t,i){console.log(i)}function on(){return new et({auth:{clientId:R.msalConfig.auth.clientId,authority:R.msalConfig.auth.authority,redirectUri:"/",postLogoutRedirectUri:"/"},cache:{cacheLocation:Je.LocalStorage},system:{allowNativeBroker:!1,loggerOptions:{loggerCallback:nn,logLevel:qe.Info,piiLoggingEnabled:!1}}})}function rn(){let t=new Map;return t.set(R.apiConfig.uri,R.apiConfig.scopes),{interactionType:oe.Redirect,protectedResourceMap:t}}function an(){return{interactionType:oe.Redirect,authRequest:{scopes:[...R.apiConfig.scopes]},loginFailedRoute:"/login"}}var Rt={providers:[Ae({eventCoalescing:!0}),Ve(It),kt(),_t(),Le(je(),ze()),he(K,Ct,rt.forRoot({type:"ball-scale-multiple"})),{provide:H,useClass:At,multi:!0},{provide:H,useClass:ot,multi:!0},{provide:H,useClass:Et,multi:!0},{provide:tt,useFactory:on},{provide:I,useFactory:an},{provide:nt,useFactory:rn},k,J,A]};var Nt=(()=>{class t{renderer;title="FrontEnd";role="trainee";constructor(e){this.renderer=e}ngOnInit(){this.setBodyBackgroundColor()}getBackgroundColor(){switch(this.role){case"admin":return"#F1F2F6";case"trainer":return"#EFE6EB";case"trainee":return"#FCF6F5";default:return"white"}}setBodyBackgroundColor(){this.renderer.setStyle(document.body,"background-color",this.getBackgroundColor())}static \u0275fac=function(n){return new(n||t)(m(B))};static \u0275cmp=g({type:t,selectors:[["app-root"]],standalone:!0,features:[f],decls:1,vars:0,template:function(n,o){n&1&&d(0,"router-outlet")},dependencies:[X,Q]})}return t})();De(Nt,Rt).catch(t=>console.error(t));
