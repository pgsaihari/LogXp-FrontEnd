<div class="container">
  <div class="translucent-box">
    <!-- Header with Title -->
    <div class="header">
      <h1 class="title"><i class="fa-solid fa-hourglass-end"></i>Log<span style="color: #e13737;">XP</span></h1>
    </div>

    <!-- Content Section with description and login/forgot password forms -->
    <div class="content" *ngIf="!isForgotPassword">
      <p>Cultivating Future Leaders Through Precision and Presence.</p>
      
      <!-- Login Form -->
      <form (ngSubmit)="login()" class="login-form">
        <input 
          type="email" 
          [(ngModel)]="email" 
          name="email" 
          placeholder="Email" 
          class="input-field" 
          required 
        />
        <input 
          type="password" 
          [(ngModel)]="password" 
          name="password" 
          placeholder="Password" 
          class="input-field" 
          required 
        />
        <button type="submit" class="login-btn">
          <i class="fa-solid fa-right-to-bracket"></i> Login
        </button>
      </form>
      
      <!-- Display error message if login fails -->
      <p class="error-message" *ngIf="errorMessage">{{ errorMessage }}</p>
      <a href="#" (click)="toggleForgotPassword($event)" class="forgot-password-link">Forgot Password?</a>
    </div>

    <!-- Forgot Password Flow -->
    <div class="content" *ngIf="isForgotPassword">
      <p *ngIf="!isOtpSent">Please enter your registered email to receive an OTP for resetting your password.</p>
      <p *ngIf="isOtpSent">Enter the OTP sent to your email and your new password. The Otp is valid for 5 minutes</p>

      <form *ngIf="!isOtpSent" (ngSubmit)="sendOtp()" class="forgot-password-form">
        <input 
          type="email" 
          [(ngModel)]="forgotEmail" 
          name="forgotEmail" 
          placeholder="Email" 
          class="input-field" 
          required 
        />
        <button type="submit" class="login-btn">Send OTP</button>
      </form>

      <form *ngIf="isOtpSent" (ngSubmit)="resetPassword()" class="reset-password-form">
        <input 
          type="text" 
          [(ngModel)]="otp" 
          name="otp" 
          placeholder="Enter OTP" 
          class="input-field" 
          required 
        />
        <input 
          type="password" 
          [(ngModel)]="newPassword" 
          name="newPassword" 
          placeholder="New Password" 
          class="input-field" 
          required 
        />
        <input 
          type="password" 
          [(ngModel)]="confirmPassword" 
          name="confirmPassword" 
          placeholder="Confirm Password" 
          class="input-field" 
          required 
        />
        <button type="submit" class="login-btn">Reset Password</button>
      </form>

      <!-- Error Message -->
      <p class="error-message" *ngIf="errorMessage">{{ errorMessage }}</p>
      <a (click)="toggleForgotPassword($event)" class="forgot-password-link">Back to Login</a>
    </div>
  </div>

  <!-- Footer with Experion Technologies Logo -->
  <div class="footer">
    <img src="assets/Exp.png" alt="Experion Technologies Logo" class="logo" />
  </div>
</div>

<!-- Spinner -->
<ngx-spinner [bdColor]="'rgba(0, 0, 0, 0.8)'"></ngx-spinner>
