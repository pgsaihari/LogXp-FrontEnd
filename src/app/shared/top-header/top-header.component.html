<div class="top-header">
  <div class="logo">
    <img src="assets/logXp.png" alt="Experion Logo" />
  </div>

  <div class="user-info" (click)="toggleDropdown()">
    <div class="user-details">
      <span class="user-name">{{ currentUser?.name }}</span>
      <span class="user-email">{{ currentUser?.role }}</span>
      <span class="user-email">{{ currentUser?.email }}</span>
    </div>
    <img class="user-avatar" src="assets/Avatar.png" alt="User Avatar" />

    <!-- Dropdown menu -->
    <div class="dropdown-menu" *ngIf="dropdownVisible">
      <ul>
        <li (click)="logout()">
          <i class="fas fa-sign-out-alt"></i> Logout
        </li>
        <li (click)="openChangePasswordPopup()">
          <i class="fas fa-key"></i> Change Password
        </li>
      </ul>
    </div>
  </div>
</div>

<!-- Change Password Popup -->
<div class="popup-overlay" *ngIf="showChangePasswordPopup">
  <div class="popup-content">
    <h2>Change Password</h2>
    <form (ngSubmit)="changePassword($event)">
      <input type="password" placeholder="Current Password" [(ngModel)]="currentPassword" name="currentPassword" required />
      <input type="password" placeholder="New Password" [(ngModel)]="newPassword" name="newPassword" required />
      <input type="password" placeholder="Confirm Password" [(ngModel)]="confirmPassword" name="confirmPassword" required />

      <div class="error-message" *ngIf="errorMessage">{{ errorMessage }}</div>
      <div class="popup-buttons">
        <button type="submit">Change Password</button>
        <button type="button" (click)="closeChangePasswordPopup()">Cancel</button>
      </div>
    </form>
  </div>
</div>
